<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${cliente.id == null ? 'Cadastro de Cliente' : 'Editar Perfil'} + ' - GameSpher'"></title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <header th:replace="~{fragments/header :: header}"></header>

    <main class="container mt-5">
        <h1 th:text="${cliente.id == null ? 'Cadastre-se' : 'Editar Perfil'}"></h1>

        <div th:if="${mensagem}" class="alert alert-success" th:text="${mensagem}"></div>
        <div th:if="${erro}" class="alert alert-danger" th:text="${erro}"></div>

        <form th:action="${cliente.id == null ? @{/perfil/cadastro} : @{/perfil/salvar}}" th:object="${cliente}" method="post" class="form-card">
            <input type="hidden" th:field="*{id}">

            <div class="mb-3">
                <label for="nome" class="form-label">Nome</label>
                <input type="text" class="form-control" id="nome" th:field="*{nome}" required>
                <div class="text-danger" th:if="${#fields.hasErrors('nome')}" th:errors="*{nome}"></div>
            </div>

            <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" th:field="*{email}" required>
                <div class="text-danger" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
            </div>

            <div class="mb-3">
                <label for="senha" class="form-label">Senha (Deixe em branco para não alterar)</label>
                <input type="password" class="form-control" id="senha" th:field="*{senha}">
                <div class="text-danger" th:if="${#fields.hasErrors('senha')}" th:errors="*{senha}"></div>
            </div>

            <div class="mb-3">
                <label for="telefone" class="form-label">Telefone</label>
                <input type="text" class="form-control" id="telefone" th:field="*{telefone}" placeholder="(XX) XXXXX-XXXX">
                <div class="text-danger" th:if="${#fields.hasErrors('telefone')}" th:errors="*{telefone}"></div>
            </div>

            <div class="mb-3">
                <label for="cpf" class="form-label">CPF</label>
                <input type="text" class="form-control" id="cpf" th:field="*{cpf}" placeholder="XXX.XXX.XXX-XX">
                <div class="text-danger" th:if="${#fields.hasErrors('cpf')}" th:errors="*{cpf}"></div>
            </div>

            <div class="mb-3">
                <label for="cep" class="form-label">CEP</label>
                <input type="text" class="form-control" id="cep" th:field="*{cep}" placeholder="XXXXX-XXX">
                <div class="text-danger" th:if="${#fields.hasErrors('cep')}" th:errors="*{cep}"></div>
            </div>

            <div class="mb-3">
                <label for="endereco" class="form-label">Endereço (Rua, Bairro)</label>
                <input type="text" class="form-control" id="endereco" th:field="*{endereco}" placeholder="Preenchido automaticamente pelo CEP">
                <div class="text-danger" th:if="${#fields.hasErrors('endereco')}" th:errors="*{endereco}"></div>
            </div>

            <div class="mb-3 row">
                <div class="col-md-6">
                    <label for="numero" class="form-label">Número</label>
                    <input type="text" class="form-control" id="numero" th:field="*{numero}">
                    <div class="text-danger" th:if="${#fields.hasErrors('numero')}" th:errors="*{numero}"></div>
                </div>
                <div class="col-md-6">
                    <label for="estado" class="form-label">Estado (UF)</label>
                    <input type="text" class="form-control" id="estado" th:field="*{estado}" placeholder="Preenchido automaticamente pelo CEP">
                    <div class="text-danger" th:if="${#fields.hasErrors('estado')}" th:errors="*{estado}"></div>
                </div>
            </div>

            <div class="d-grid gap-2 mt-4">
                <button type="submit" class="btn btn-primary" th:text="${cliente.id == null ? 'Cadastrar' : 'Salvar Alterações'}"></button>
                <a th:href="@{/inicio}" class="btn btn-secondary">Voltar</a>
            </div>
        </form>
    </main>

    <footer th:replace="~{fragments/footer :: footer}"></footer>
    <script th:src="@{/js/masks.js}"></script>
</body>
</html>
